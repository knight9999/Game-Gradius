"use strict";const _CANVAS_IMGS={vicviper1:{src:"images/gradius_vicviper1.png",rate:.26,obj:new Image},vicviper2:{src:"images/gradius_vicviper2.png",rate:.26,obj:new Image},vicviper3:{src:"images/gradius_vicviper3.png",rate:.26,obj:new Image},vicviper4:{src:"images/gradius_vicviper4.png",rate:.26,obj:new Image},vicviper5:{src:"images/gradius_vicviper5.png",rate:.26,obj:new Image},vicviper1_e:{src:"images/gradius_vicviper1_e.png",rate:.26,obj:new Image},vicviper2_e:{src:"images/gradius_vicviper2_e.png",rate:.26,obj:new Image},vicviper3_e:{src:"images/gradius_vicviper3_e.png",rate:.26,obj:new Image},vicviper4_e:{src:"images/gradius_vicviper4_e.png",rate:.26,obj:new Image},vicviper5_e:{src:"images/gradius_vicviper5_e.png",rate:.26,obj:new Image},vicviper_back1:{src:"images/gradius_vicviper_back1.png",rate:.26,obj:new Image},vicviper_back2:{src:"images/gradius_vicviper_back2.png",rate:.26,obj:new Image},vicviper_back3:{src:"images/gradius_vicviper_back3.png",rate:.26,obj:new Image},vicviper_back1_e:{src:"images/gradius_vicviper_back1_e.png",rate:.26,obj:new Image},vicviper_bomb:{src:"images/gradius_vicviper_bomb.png",rate:1,obj:new Image},vicviper_bomb_red:{src:"images/gradius_vicviper_bomb_red.png",rate:1,obj:new Image},option:{src:"images/option.png",rate:.3,obj:new Image},missile1:{src:"images/missile1.png",rate:.48,obj:new Image},missile2:{src:"images/missile2.png",rate:.48,obj:new Image},missile3:{src:"images/missile3.png",rate:.48,obj:new Image},missile4:{src:"images/missile4.png",rate:.48,obj:new Image},missile5:{src:"images/missile5.png",rate:.48,obj:new Image},missile6:{src:"images/missile6.png",rate:.48,obj:new Image},missile7:{src:"images/missile7.png",rate:.48,obj:new Image},missile8:{src:"images/missile8.png",rate:.48,obj:new Image},shot1:{src:"images/gradius_shot1.png",rate:.4,obj:new Image},shot2:{src:"images/gradius_shot2.png",rate:.4,obj:new Image},shot3:{src:"images/gradius_shot3.png",rate:.3,obj:new Image},meter:{src:"images/gradius_meter.png",rate:.5,obj:new Image},meter_c_speedup:{src:"images/gradius_meter_c_speedup.png",rate:.5,obj:new Image},meter_c_missile:{src:"images/gradius_meter_c_missile.png",rate:.5,obj:new Image},meter_c_double:{src:"images/gradius_meter_c_double.png",rate:.5,obj:new Image},meter_c_laser:{src:"images/gradius_meter_c_laser.png",rate:.5,obj:new Image},meter_c_option:{src:"images/gradius_meter_c_option.png",rate:.5,obj:new Image},meter_c_shield:{src:"images/gradius_meter_c_shield.png",rate:.5,obj:new Image},meter_blank:{src:"images/gradius_meter_blank.png",rate:.5,obj:new Image},meter_c_blank:{src:"images/gradius_meter_c_blank.png",rate:.5,obj:new Image},forcefield1:{src:"images/gradius_forcefield1.png",rate:1,obj:new Image},forcefield2:{src:"images/gradius_forcefield2.png",rate:1,obj:new Image},forcefield_red1:{src:"images/gradius_forcefield_red1.png",rate:1,obj:new Image},forcefield_red2:{src:"images/gradius_forcefield_red2.png",rate:1,obj:new Image},shield1:{src:"images/gradius_shield1.png",rate:.4,obj:new Image},shield2:{src:"images/gradius_shield2.png",rate:.4,obj:new Image},shield_red1:{src:"images/gradius_shield_red1.png",rate:.4,obj:new Image},shield_red2:{src:"images/gradius_shield_red2.png",rate:.4,obj:new Image},enemy_a_1:{src:"images/gradius_enemy_a_1.png",rate:.52,obj:new Image},enemy_a_2:{src:"images/gradius_enemy_a_2.png",rate:.52,obj:new Image},enemy_a_3:{src:"images/gradius_enemy_a_3.png",rate:.52,obj:new Image},enemy_a_4:{src:"images/gradius_enemy_a_4.png",rate:.52,obj:new Image},enemy_a_5:{src:"images/gradius_enemy_a_5.png",rate:.52,obj:new Image},enemy_a_6:{src:"images/gradius_enemy_a_6.png",rate:.52,obj:new Image},enemy_a_7:{src:"images/gradius_enemy_a_7.png",rate:.52,obj:new Image},enemy_a_8:{src:"images/gradius_enemy_a_8.png",rate:.52,obj:new Image},enemy_b_1:{src:"images/gradius_enemy_b_1.png",rate:.52,obj:new Image},enemy_b_2:{src:"images/gradius_enemy_b_2.png",rate:.52,obj:new Image},enemy_b_3:{src:"images/gradius_enemy_b_3.png",rate:.52,obj:new Image},enemy_b_4:{src:"images/gradius_enemy_b_4.png",rate:.52,obj:new Image},enemy_b_5:{src:"images/gradius_enemy_b_5.png",rate:.52,obj:new Image},enemy_b_6:{src:"images/gradius_enemy_b_6.png",rate:.52,obj:new Image},enemy_b_7:{src:"images/gradius_enemy_b_7.png",rate:.52,obj:new Image},enemy_b_8:{src:"images/gradius_enemy_b_8.png",rate:.52,obj:new Image},enemy_c_1:{src:"images/gradius_enemy_c_1.png",rate:.4,obj:new Image},enemy_c_2:{src:"images/gradius_enemy_c_2.png",rate:.4,obj:new Image},enemy_c_3:{src:"images/gradius_enemy_c_3.png",rate:.4,obj:new Image},enemy_c_4:{src:"images/gradius_enemy_c_4.png",rate:.4,obj:new Image},enemy_c_5:{src:"images/gradius_enemy_c_5.png",rate:.4,obj:new Image},enemy_c_6:{src:"images/gradius_enemy_c_6.png",rate:.4,obj:new Image},enemy_c_7:{src:"images/gradius_enemy_c_7.png",rate:.4,obj:new Image},enemy_c_8:{src:"images/gradius_enemy_c_8.png",rate:.4,obj:new Image},enemy_c_11:{src:"images/gradius_enemy_c_11.png",rate:.4,obj:new Image},enemy_c_12:{src:"images/gradius_enemy_c_12.png",rate:.4,obj:new Image},enemy_c_13:{src:"images/gradius_enemy_c_13.png",rate:.4,obj:new Image},enemy_c_14:{src:"images/gradius_enemy_c_14.png",rate:.4,obj:new Image},enemy_c_15:{src:"images/gradius_enemy_c_15.png",rate:.4,obj:new Image},enemy_c_16:{src:"images/gradius_enemy_c_16.png",rate:.4,obj:new Image},enemy_c_17:{src:"images/gradius_enemy_c_17.png",rate:.4,obj:new Image},enemy_c_18:{src:"images/gradius_enemy_c_18.png",rate:.4,obj:new Image},enemy_d_1:{src:"images/gradius_enemy_d_1.png",rate:.2,obj:new Image},enemy_d_2:{src:"images/gradius_enemy_d_2.png",rate:.2,obj:new Image},enemy_d_3:{src:"images/gradius_enemy_d_3.png",rate:.2,obj:new Image},enemy_d_4:{src:"images/gradius_enemy_d_4.png",rate:.2,obj:new Image},enemy_e_1:{src:"images/gradius_enemy_e_1.png",rate:.2,obj:new Image},enemy_e_2:{src:"images/gradius_enemy_e_2.png",rate:.2,obj:new Image},enemy_e_3:{src:"images/gradius_enemy_e_3.png",rate:.2,obj:new Image},enemy_e_4:{src:"images/gradius_enemy_e_4.png",rate:.2,obj:new Image},enemy_f_1:{src:"images/gradius_enemy_f_1.png",rate:.4,obj:new Image},enemy_f_2:{src:"images/gradius_enemy_f_2.png",rate:.4,obj:new Image},enemy_f_3:{src:"images/gradius_enemy_f_3.png",rate:.4,obj:new Image},enemy_f_4:{src:"images/gradius_enemy_f_4.png",rate:.4,obj:new Image},enemy_f_5:{src:"images/gradius_enemy_f_5.png",rate:.4,obj:new Image},enemy_f_6:{src:"images/gradius_enemy_f_6.png",rate:.4,obj:new Image},enemy_f_7:{src:"images/gradius_enemy_f_7.png",rate:.4,obj:new Image},enemy_f_8:{src:"images/gradius_enemy_f_8.png",rate:.4,obj:new Image},enemy_g_1:{src:"images/gradius_enemy_g_1.png",rate:.4,obj:new Image},enemy_g_2:{src:"images/gradius_enemy_g_2.png",rate:.4,obj:new Image},enemy_g_3:{src:"images/gradius_enemy_g_3.png",rate:.4,obj:new Image},enemy_g_4:{src:"images/gradius_enemy_g_4.png",rate:.4,obj:new Image},enemy_g_5:{src:"images/gradius_enemy_g_5.png",rate:.4,obj:new Image},enemy_g_6:{src:"images/gradius_enemy_g_6.png",rate:.4,obj:new Image},enemy_g_7:{src:"images/gradius_enemy_g_7.png",rate:.4,obj:new Image},enemy_g_8:{src:"images/gradius_enemy_g_8.png",rate:.4,obj:new Image},enemy_o_1:{src:"images/gradius_enemy_o_1.png",rate:.3,obj:new Image},enemy_o_2:{src:"images/gradius_enemy_o_2.png",rate:.3,obj:new Image},enemy_p_1:{src:"images/gradius_enemy_p_1.png",rate:.26,obj:new Image},enemy_p_2:{src:"images/gradius_enemy_p_2.png",rate:.3,obj:new Image},enemy_p_3:{src:"images/gradius_enemy_p_3.png",rate:.3,obj:new Image},enemy_p_4:{src:"images/gradius_enemy_p_4.png",rate:.3,obj:new Image},enemy_p_5:{src:"images/gradius_enemy_p_5.png",rate:.3,obj:new Image},enemy_z:{src:"images/gradius_enemy_z_core.png",rate:.6,obj:new Image},enemy_z_1:{src:"images/gradius_enemy_z_core_1.png",rate:.6,obj:new Image},enemy_z_2:{src:"images/gradius_enemy_z_core_2.png",rate:.6,obj:new Image},enemy_z_3:{src:"images/gradius_enemy_z_core_3.png",rate:.6,obj:new Image},enemy_z_4_1:{src:"images/gradius_enemy_z_core_4_1.png",rate:.6,obj:new Image},enemy_z_4_2:{src:"images/gradius_enemy_z_core_4_2.png",rate:.6,obj:new Image},enemy_z_4_3:{src:"images/gradius_enemy_z_core_4_3.png",rate:.6,obj:new Image},enemy_z_4_4:{src:"images/gradius_enemy_z_core_4_4.png",rate:.6,obj:new Image},enemy_z_4_5:{src:"images/gradius_enemy_z_core_4_5.png",rate:.6,obj:new Image},enemy_collapes1:{src:"images/gradius_enemy_collapes1.png",rate:1,obj:new Image},enemy_collapes2:{src:"images/gradius_enemy_collapes2.png",rate:1,obj:new Image},enemy_collapes11:{src:"images/gradius_enemy_collapes11.png",rate:.2,obj:new Image},enemy_collapes12:{src:"images/gradius_enemy_collapes12.png",rate:.2,obj:new Image},enemy_collapes13:{src:"images/gradius_enemy_collapes13.png",rate:.2,obj:new Image},enemy_collapes91:{src:"images/gradius_enemy_collapes91.png",rate:.2,obj:new Image},enemy_collapes92:{src:"images/gradius_enemy_collapes92.png",rate:.2,obj:new Image},enemy_collapes93:{src:"images/gradius_enemy_collapes93.png",rate:.2,obj:new Image},enemy_collapes94:{src:"images/gradius_enemy_collapes94.png",rate:.2,obj:new Image},enemy_collapes95:{src:"images/gradius_enemy_collapes95.png",rate:.2,obj:new Image},enemy_collapes96:{src:"images/gradius_enemy_collapes96.png",rate:.2,obj:new Image},enemy_bullet1:{src:"images/gradius_enemy_bullet1.png",rate:.8,obj:new Image},enemy_bullet2:{src:"images/gradius_enemy_bullet2.png",rate:.8,obj:new Image},enemy_bullet_z:{src:"images/gradius_enemy_bullet_z.png",rate:.2,obj:new Image},pc1:{src:"images/gradius_pc1.png",rate:.5,obj:new Image},pc2:{src:"images/gradius_pc2.png",rate:.5,obj:new Image},pc3:{src:"images/gradius_pc3.png",rate:.5,obj:new Image},pc4:{src:"images/gradius_pc4.png",rate:.5,obj:new Image},pc5:{src:"images/gradius_pc5.png",rate:.5,obj:new Image},map_c_A:{src:"images/gradius_map_c_A.png",rate:1,obj:new Image},map_f_A:{src:"images/gradius_map_f_A.png",rate:1,obj:new Image},map_f_B:{src:"images/gradius_map_f_B.png",rate:1,obj:new Image},map_f_C:{src:"images/gradius_map_f_C.png",rate:1,obj:new Image},map_f_D:{src:"images/gradius_map_f_D.png",rate:1,obj:new Image},map_f_E:{src:"images/gradius_map_f_E.png",rate:1,obj:new Image},map_f_F:{src:"images/gradius_map_f_F.png",rate:1,obj:new Image},map_f_G:{src:"images/gradius_map_f_G.png",rate:1,obj:new Image},map_f_H:{src:"images/gradius_map_f_H.png",rate:1,obj:new Image},map_f_I:{src:"images/gradius_map_f_I.png",rate:1,obj:new Image},map_f_J:{src:"images/gradius_map_f_J.png",rate:1,obj:new Image},map_f_K:{src:"images/gradius_map_f_K.png",rate:1,obj:new Image},map_f_L:{src:"images/gradius_map_f_L.png",rate:1,obj:new Image},map_f_M:{src:"images/gradius_map_f_M.png",rate:1,obj:new Image},map_f_N:{src:"images/gradius_map_f_N.png",rate:1,obj:new Image},map_f_O:{src:"images/gradius_map_f_O.png",rate:1,obj:new Image},map_f_P:{src:"images/gradius_map_f_P.png",rate:1,obj:new Image}},_CANVAS_IMGS_INIT={font_0:{src:"images/gradius_font_0.png",rate:1,obj:new Image},font_1:{src:"images/gradius_font_1.png",rate:1,obj:new Image},font_2:{src:"images/gradius_font_2.png",rate:1,obj:new Image},font_3:{src:"images/gradius_font_3.png",rate:1,obj:new Image},font_4:{src:"images/gradius_font_4.png",rate:1,obj:new Image},font_5:{src:"images/gradius_font_5.png",rate:1,obj:new Image},font_6:{src:"images/gradius_font_6.png",rate:1,obj:new Image},font_7:{src:"images/gradius_font_7.png",rate:1,obj:new Image},font_8:{src:"images/gradius_font_8.png",rate:1,obj:new Image},font_9:{src:"images/gradius_font_9.png",rate:1,obj:new Image},font_a:{src:"images/gradius_font_a.png",rate:1,obj:new Image},font_b:{src:"images/gradius_font_b.png",rate:1,obj:new Image},font_c:{src:"images/gradius_font_c.png",rate:1,obj:new Image},font_d:{src:"images/gradius_font_d.png",rate:1,obj:new Image},font_e:{src:"images/gradius_font_e.png",rate:1,obj:new Image},font_f:{src:"images/gradius_font_f.png",rate:1,obj:new Image},font_g:{src:"images/gradius_font_g.png",rate:1,obj:new Image},font_h:{src:"images/gradius_font_h.png",rate:1,obj:new Image},font_i:{src:"images/gradius_font_i.png",rate:1,obj:new Image},font_j:{src:"images/gradius_font_j.png",rate:1,obj:new Image},font_k:{src:"images/gradius_font_k.png",rate:1,obj:new Image},font_l:{src:"images/gradius_font_l.png",rate:1,obj:new Image},font_m:{src:"images/gradius_font_m.png",rate:1,obj:new Image},font_n:{src:"images/gradius_font_n.png",rate:1,obj:new Image},font_o:{src:"images/gradius_font_o.png",rate:1,obj:new Image},font_p:{src:"images/gradius_font_p.png",rate:1,obj:new Image},font_q:{src:"images/gradius_font_q.png",rate:1,obj:new Image},font_r:{src:"images/gradius_font_r.png",rate:1,obj:new Image},font_s:{src:"images/gradius_font_s.png",rate:1,obj:new Image},font_t:{src:"images/gradius_font_t.png",rate:1,obj:new Image},font_u:{src:"images/gradius_font_u.png",rate:1,obj:new Image},font_v:{src:"images/gradius_font_v.png",rate:1,obj:new Image},font_w:{src:"images/gradius_font_w.png",rate:1,obj:new Image},font_x:{src:"images/gradius_font_x.png",rate:1,obj:new Image},font_y:{src:"images/gradius_font_y.png",rate:1,obj:new Image},font_z:{src:"images/gradius_font_z.png",rate:1,obj:new Image},"font_:":{src:"images/gradius_font_27.png",rate:1,obj:new Image},gradius_powermeterselect:{src:"images/gradius_powermeterselect.png",rate:.28,obj:new Image},gradius_powermeterselect_shield:{src:"images/gradius_powermeterselect_shield.png",rate:.28,obj:new Image},gradius_powermeterselect_shield_:{src:"images/gradius_powermeterselect_shield_.png",rate:.28,obj:new Image},gradius_powermeterselect_0:{src:"images/gradius_powermeterselect_0.png",rate:.28,obj:new Image},gradius_powermeterselect_1:{src:"images/gradius_powermeterselect_1.png",rate:.28,obj:new Image},gradius_powermeterselect_2:{src:"images/gradius_powermeterselect_2.png",rate:.28,obj:new Image},gradius_powermeterselect_3:{src:"images/gradius_powermeterselect_3.png",rate:.28,obj:new Image},gradius_powermeterselect_shield_0:{src:"images/gradius_powermeterselect_shield_0.png",rate:.28,obj:new Image},gradius_powermeterselect_shield_1:{src:"images/gradius_powermeterselect_shield_1.png",rate:.28,obj:new Image}};let _MAPDEFS="",_MAPDEF="",_MAP_PETTERN=1,_BACKGROUND_SPEED=0;const _MAP_ENEMIES={_D:{_U:0,_D:1,_R:2,_L:3},_ENEMIES:{a:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_a(e,_,a))},_o:_CANVAS_IMGS.enemy_a_1},b:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_b(e,_,a))},_o:_CANVAS_IMGS.enemy_b_1},c:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_c(e,_,a))},_o:_CANVAS_IMGS.enemy_c_1},d:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_d(e,_,a))},_o:_CANVAS_IMGS.enemy_d_1},e:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_e(e,_,a))},_o:_CANVAS_IMGS.enemy_e_1},f:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_f(e,_,a))},_o:_CANVAS_IMGS.enemy_f_1},g:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_g(e,_,a))},_o:_CANVAS_IMGS.enemy_g_1},p:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_p(e,_,a))},_o:_CANVAS_IMGS.enemy_p_1},n:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_o(e,_,a))},_o:_CANVAS_IMGS.enemy_o_1},o:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_o(e,_,a))},_o:_CANVAS_IMGS.enemy_o_1},z:{_f:function(e,_,a){_ENEMIES.push(new ENEMY_BOSS_BOGCORE(e,_,a))},_o:_CANVAS_IMGS.enemy_z}}},_MAP_THEME={_THEME1:{_p:{},_enemies:{}},_THEME2:{_p:{A:{_o:_CANVAS_IMGS.map_f_A,_s:"1,0",_mx:function(e){return e},_my:function(e){return e}},B:{_o:_CANVAS_IMGS.map_f_B,_s:"0,1",_mx:function(e){return e},_my:function(e){return e-1}},C:{_o:_CANVAS_IMGS.map_f_C,_s:"1,0",_mx:function(e){return e},_my:function(e){return e}},D:{_o:_CANVAS_IMGS.map_f_D,_s:"0,1",_mx:function(e){return e},_my:function(e){return e-1}},E:{_o:_CANVAS_IMGS.map_f_E,_s:"1",_mx:function(e){return e},_my:function(e){return e}},F:{_o:_CANVAS_IMGS.map_f_F,_s:"000110000,000110000,001111000,011111100,011111110,111111111",_mx:function(e){return e},_my:function(e){return e}},G:{_o:_CANVAS_IMGS.map_f_G,_s:"111111110,011111110,011111100,001111000,000110000,000110000",_mx:function(e){return e},_my:function(e){return e}},H:{_o:_CANVAS_IMGS.map_f_H,_s:"00000000000000000000,00000111111111111110,00000111111110000000,00000000011110000000,00000000001100000000,00000000001100000000,00000000001100000000,11111111111111111100,01111111111111111100,00000000011000000000,00000000011000000000,00000000111000000000,00000001111110000000",_mx:function(e){return e},_my:function(e){return e}},I:{_o:_CANVAS_IMGS.map_f_I,_s:"000000010000000,000000010000000,000000111000000,000001111100000,000011111110000,000111111111000,001111111111100,001111111111100,011111111111110,111111111111111",_mx:function(e){return e},_my:function(e){return e}},J:{_o:_CANVAS_IMGS.map_f_J,_s:"111111111111111,011111111111110,001111111111100,001111111111100,000111111111000,000011111110000,000001111100000,000000111000000,000000010000000,000000010000000",_mx:function(e){return e},_my:function(e){return e}},K:{_o:_CANVAS_IMGS.map_f_K,_s:"010",_mx:function(e){return e},_my:function(e){return e}},L:{_o:_CANVAS_IMGS.map_f_L,_s:"010",_mx:function(e){return e},_my:function(e){return e}},M:{_o:_CANVAS_IMGS.map_f_M,_s:"0111,1111",_mx:function(e){return e},_my:function(e){return e}},N:{_o:_CANVAS_IMGS.map_f_N,_s:"1111,0111",_mx:function(e){return e},_my:function(e){return e}},O:{_o:_CANVAS_IMGS.map_f_O,_s:"1111,1110",_mx:function(e){return e},_my:function(e){return e}},P:{_o:_CANVAS_IMGS.map_f_P,_s:"1110,1111",_mx:function(e){return e},_my:function(e){return e}}},_enemies:{}},_THEME3:{_p:{A:{_o:_CANVAS_IMGS.map_c_A,_s:"1",_mx:function(e){return e},_my:function(e){return e}},M:{_o:_CANVAS_IMGS.map_f_M,_s:"0111,1111",_mx:function(e){return e},_my:function(e){return e}},N:{_o:_CANVAS_IMGS.map_f_N,_s:"1111,0111",_mx:function(e){return e},_my:function(e){return e}},O:{_o:_CANVAS_IMGS.map_f_O,_s:"1111,1110",_mx:function(e){return e},_my:function(e){return e}},P:{_o:_CANVAS_IMGS.map_f_P,_s:"1110,1111",_mx:function(e){return e},_my:function(e){return e}}},_enemies:{}}};class GameObject_MAP{constructor(e){this.pt=e||0,this.initx=0,this.x=this.initx,this.collision=new RegExp("[1A-Z]"),this.collision_enemies=new RegExp("[a-z]","g"),this.collision_map=new RegExp("[A-Z]"),this.collision_map_d=new RegExp("[BD]"),this.t=25,this.mapdef=new Array,this.mapdef_col=new Array,this.map_theme=0,this.map_pettern=0,this.map_difficult=0,this.map_background_speed=0}init(e){_AJAX("./gradius_map.json","json",function(_){_MAPDEFS=_,e()})}set_stage_map_pattern(e){this.map_pettern=e}init_stage_map(){this.x=parseInt(_MAPDEFS[this.map_pettern]._initx),this.initx=parseInt(_MAPDEFS[this.map_pettern]._initx),this.mapdef=_MAPDEFS[this.map_pettern]._map,this.map_difficult=parseInt(_MAPDEFS[this.map_pettern]._difficult)-1,_ENEMY_DIFFICULT=_ISDEBUG?_ENEMY_DIFFICULT:parseInt(_MAPDEFS[this.map_pettern]._difficult)-1,this.map_background_speed=parseInt(_MAPDEFS[this.map_pettern]._speed),_BACKGROUND_SPEED=parseInt(_MAPDEFS[this.map_pettern]._speed),_MAP_PETTERN=this.map_pettern,this.map_theme=_MAPDEFS[this.map_pettern]._theme,this.init_mapdef_col()}init_enemies_location(){for(let e=0;e<this.mapdef.length;e++)for(let _=0;_<this.mapdef[e].length;_++){if(this.isCollisionBit(this.mapdef[e][_]))continue;let a=this.isMapCollision(_,e-1)?"up":"down";if(a=this.isMapCollision(_,e+1)?"down":"up","a"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_a(this.x+_*this.t,e*this.t,a)),"b"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_b(this.x+_*this.t,e*this.t,a)),"c"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_c(this.x+_*this.t,e*this.t,a)),"d"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_d(this.x+_*this.t,e*this.t,a)),"e"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_e(this.x+_*this.t,e*this.t,a)),"f"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_f(this.x+_*this.t,e*this.t,a)),"g"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_g(this.x+_*this.t,e*this.t,a)),"p"===this.mapdef[e][_]){let a=new ENEMY_p(this.x+_*this.t,e*this.t);_ENEMIES.push(a),_ENEMIES_BOUNDS.push(a)}if("n"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_n(this.x+_*this.t,e*this.t)),"o"===this.mapdef[e][_]&&_ENEMIES.push(new ENEMY_o(this.x+_*this.t,e*this.t)),"z"===this.mapdef[e][_]){let a=new ENEMY_BOSS_BOGCORE(this.x+_*this.t,e*this.t);_ENEMIES.push(a)}}}init_mapdef_col(){let e=this;Object.assign(e.mapdef_col,e.mapdef);for(let _=0;_<e.mapdef_col.length;_++)e.mapdef_col[_]=e.mapdef_col[_].replace(e.collision_enemies,"0");for(let _=0;_<e.mapdef_col.length;_++){let a=e.mapdef_col[_];for(let n=0;n<a.length;n++){if(!e.isCollisionBit(a[n]))continue;if("1"===a[n])continue;let s=_MAP_THEME[e.map_theme]._p[a[n]]._s.split(",");for(let r=0;r<s.length;r++){let g=e.mapdef_col[_+r],m=g.substr(0,n),i=_GAME.getOrBit(g.substr(n,s[r].length),s[r],s[r].length),t=g.substr(n+s[r].length,a.length);e.mapdef_col[_+r]=m+i+t}}}}getCollisionFlag(){return this.collision}getBackGroundSpeed(){return this.map_background_speed}get_stage_map_pattern(e){return this.map_pettern}getMapXToPx(e){return e*this.t}getMapYToPx(e){return e*this.t}getMapX(e){return parseInt((e+_SCROLL_POSITION-this.initx)/this.t)}getMapY(e){return parseInt(e/this.t)}isCollisionBit(e){return null!==e.match(this.collision)}isMapDouble(e){return null!==e.match(this.collision_map_d)}isMapBefore(e,_){return e<0}isMapLastSide(e,_){let a=this;return void 0!==a.mapdef[_]&&(void 0===a.mapdef[_][e]||e===a.mapdef[_].length-1)}isMapOver(e,_){let a=this;return void 0!==a.mapdef[_]&&(void 0===a.mapdef[_][e]||e>a.mapdef[_].length-1)}isMapCollision(e,_){let a=this;return void 0!==a.mapdef_col[_]&&(void 0!==a.mapdef_col[_][e]&&!!a.isCollisionBit(a.mapdef_col[_][e]))}isPlayersShotCollision(){for(let e=0;e<_PLAYERS_SHOTS[_SHOTTYPE].length;e++){let _=_PLAYERS_SHOTS[_SHOTTYPE][e];for(let e=0;e<_.shots.length;e++){let a=_.shots[e];a._shot_alive&&(a.x<this.initx-_SCROLL_POSITION||a.x>this.mapdef[0].length*this.t+this.initx-_SCROLL_POSITION||_.map_collition(a))}}for(let e=0;e<_PLAYERS_MISSILE.length;e++){let _=_PLAYERS_MISSILE[e];if(_.player.isalive())for(let e=0;e<_.shots.length;e++){let a=_.shots[e];a._shot_alive&&_.map_collition(a)}}}show(){}showMapForStageselect(e){let _=this;if(null!==e&&void 0!==e){for(let a=0;a<e._map.length;a++){let n=e._map[a].length;for(let s=0;s<(n>30?30:n);s++){let n=e._map[a][s];if("0"!==n)if(null!==n.match(_.collision_enemies)){let e=_CANVAS_IMGS["enemy_"+n+"_1"].obj;_CONTEXT.drawImage(e,50+10*s,130+10*a,e.width/2.5,e.height/2.5)}else{let _=_MAP_THEME[e._theme]._p[n],r=_._o.obj;_CONTEXT.drawImage(r,50+10*s,130+10*_._my(a),r.width/2.5,r.height/2.5)}}}_CONTEXT.fillStyle="rgba(0,0,0,1)",_CONTEXT.fillRect(351,130,_CANVAS.width,200)}}move(){let e=this;e.x-=e.map_background_speed;for(let _=0;_<e.mapdef.length;_++)for(let a=0;a<e.mapdef[_].length;a++){let n=e.mapdef[_][a];if(!e.isCollisionBit(n))continue;if(e.x+a*e.t<-500||e.x+a*e.t>_CANVAS.width+100)continue;let s=_MAP_THEME[e.map_theme]._p[n],r=s._o.obj;_CONTEXT.drawImage(r,e.x+s._mx(a)*e.t,s._my(_)*e.t,r.width,r.height)}}}